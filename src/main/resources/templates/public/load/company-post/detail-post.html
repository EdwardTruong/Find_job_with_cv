<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org">
<head>
<title>Work CV</title>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=swap"
	rel="stylesheet">
<!-- CSS -->
<link rel="stylesheet"
	th:href="@{/assets/css/open-iconic-bootstrap.min.css}">
<link rel="stylesheet" th:href="@{/assets/css/animate.css}">
<link rel="stylesheet" th:href="@{/assets/css/owl.carousel.min.css}">
<link rel="stylesheet"
	th:href="@{/assets/css/owl.theme.default.min.css}">
<link rel="stylesheet" th:href="@{/assets/css/magnific-popup.css}">
<link rel="stylesheet" th:href="@{/assets/css/owl.carousel.min.css}">
<link rel="stylesheet"
	th:href="@{/assets/css/owl.theme.default.min.css}">
<link rel="stylesheet" th:href="@{/assets/css/aos.css}">
<link rel="stylesheet" th:href="@{/assets/css/ionicons.min.css}">
<link rel="stylesheet" th:href="@{/assets/css/bootstrap-datepicker.css}">
<link rel="stylesheet" th:href="@{/assets/css/jquery.timepicker.css}">
<link rel="stylesheet" th:href="@{/assets/css/css/bootstrap-reboot.css}">
<link rel="stylesheet"
	th:href="@{/assets/css/css/mixins/_text-hide.css}">
<link rel="stylesheet" th:href="@{/assets/css/flaticon.css}">
<link rel="stylesheet" th:href="@{/assets/css/icomoon.css}">
<link rel="stylesheet" th:href="@{/assets/css/style.css}">
<link rel="stylesheet"
	th:href="@{/assets/css/bootstrap/bootstrap-grid.css}">
<link rel="stylesheet"
	th:href="@{/assets/css/bootstrap/bootstrap-reboot.css}">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
	rel="stylesheet" />

<!-- JS -->
<script th:src="@{/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/js/jquery-migrate-3.0.1.min.js}"></script>
<script th:src="@{/assets/js/popper.min.js}"></script>
<script th:src="@{/assets/js/bootstrap.min.js}"></script>
<script th:src="@{/assets/js/jquery.easing.1.3.js}"></script>
<script th:src="@{/assets/js/jquery.waypoints.min.js}"></script>
<script th:src="@{/assets/js/jquery.stellar.min.js}"></script>
<script th:src="@{/assets/js/owl.carousel.min.js}"></script>
<script th:src="@{/assets/js/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/assets/js/aos.js}"></script>
<script th:src="@{/assets/js/jquery.animateNumber.min.js}"></script>
<script th:src="@{/assets/js/scrollax.min.js}"></script>
<script
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script th:src="@{/assets/js/google-map.js}"></script>
<script th:src="@{/assets/js/main.js}"></script>
<script
	src="https://cdn.ckeditor.com/ckeditor5/29.0.0/classic/ckeditor.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
	crossorigin="anonymous"></script>

</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid px-md-4">
			<a sec:authorize="!isAuthenticated()" class="navbar-brand"
				th:href="@{/}">HOME - WOKING CV</a> <a
				sec:authorize="isAuthenticated()" class="navbar-brand"
				th:href="@{/home}">HOME - WOKING CV</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#ftco-nav" aria-controls="ftco-nav"
				aria-expanded="false" aria-label="Toggle navigation">
				<span class="oi oi-menu"></span> Menu
			</button>
			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto">
					<li sec:authorize="!isAuthenticated()" class="nav-item"><a
						th:href="@{/}" class="nav-link">Trang chủ</a></li>
					<li sec:authorize="isAuthenticated()" class="nav-item"><a
						th:href="@{/home}" class="nav-link">Trang chủ</a></li>
					<li class="nav-item"><a th:href="@{/jobs}" class="nav-link">Công
							việc</a></li>
					<li class="nav-item dropdown" sec:authorize="hasRole('ROLE_USER')">
						<a href="#" class="nav-link dropdown-toggle"
						data-toggle="dropdown" sec:authentication="principal.fullName"></a>
						<ul class="dropdown-menu dropdown2">
							<li><a th:href="@{/user/profile}">Hồ Sơ</a></li>
							<li><a th:href="@{/save-job/get-list}">Công việc đã lưu</a></li>
							<li><a th:href="@{/apply/get-list}">Công việc đã ứng
									tuyển</a></li>
							<li><a th:href="@{/follow/get-list}">Công ty đã theo dõi</a></li>
						</ul>
					</li>
					<li sec:authorize="hasRole('ROLE_COMPANY')" class="nav-link">
						<span th:text="${user.nameCompany}"></span>
					</li>
					<li sec:authorize="hasRole('ROLE_COMPANY')"
						class="nav-item dropdown "><a href="#"
						class="nav-link dropdown-toggle active" data-toggle="dropdown">Danh
							sách bài đăng</a>
						<ul class="dropdown-menu dropdown2">
							<li><a th:href="@{/company/profile}">Hồ Sơ</a></li>
							<li><a th:href="@{/recruitment/list-post}">Danh sách bài
									đăng</a></li>
							<li><a th:href="@{/recruitment/post}">Đăng tuyển</a></li>
							<li><a th:href="@{/apply/list-user}">Ứng cử viên tiềm
									năng</a></li>
						</ul></li>
					<li sec:authorize="isAuthenticated()"
						class="nav-item cta cta-colored"><a th:href="@{/auth/logout}"
						class="nav-link">Đăng xuất</a></li>
					<li sec:authorize="!isAuthenticated()"
						class="nav-item cta cta-colored"><a th:href="@{/auth/login}"
						class="nav-link">Đăng nhập</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- END nav -->


	<div th:if="${success}" class="toast" data-delay="2000"
		style="position: fixed; top: 100PX; right: 10PX; z-index: 2000; width: 300px">
		<script>
			swal({
				title : 'Duyệt thành công!',
				/* text: 'Redirecting...', */
				icon : 'success',
				timer : 3000,
				buttons : true,
				type : 'success'
			})
		</script>
	</div>

	<div class="hero-wrap hero-wrap-2"
		style="background-image: url('/assets/images/bg_1.jpg');"
		data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div
				class="row no-gutters slider-text align-items-end justify-content-start">
				<div class="col-md-12 text-center mb-5">
					<p class="breadcrumbs mb-0">
						<span class="mr-3"><a href="index.html">Trang chủ <i
								class="ion-ios-arrow-forward"></i></a></span>Chi tiết <span></span>
					</p>
					<h1 class="mb-3 bread">Chi tiết công việc</h1>
				</div>
			</div>
		</div>
	</div>
	<!--  -->
	<section style="margin-top: 10px" class="site-section mb-3">
		<div class="container">
			<div class="row align-items-center mb-5">
				<div class="col-lg-8 mb-4 mb-lg-0">
					<div class="d-flex align-items-center">
						<div class="border p-2 d-inline-block mr-3 rounded">
							<img id="pic" height="100" width="100" alt="Image"
								th:src="${company.logo == null} ? @{'https://st.quantrimang.com/photos/image/072015/22/avatar.jpg'} : @{'/assets/images/' + ${company.logo}}">
						</div>
						<div>
							<h2></h2>
							<div>
								<span class="icon-briefcase mr-2"></span><a
									class="ml-0 mr-2 mb-2" th:text="${company.email}"></a> <span
									class="icon-room mr-2"></span><span class="m-2"
									th:text="${company.address}"></span> <span
									class="bi bi-phone-vibrate mr-2"></span><span class="m-2"
									th:text="${company.phoneNumber}"></span>
							</div>
							<input type="hidden" id="idRe" th:value="${recruitment.id}">
						</div>
					</div>
				</div>
				<div class="col-lg-4">
					<div class="row">
						<div class="col-6">
							<div sec:authorize="hasRole('ROLE_USER')">
								<a th:if="${user.saveJobId == 0 }"
									th:onclick="'save(' +${recruitment.id}+ ')'"
									class="btn btn-block btn-light btn-md"><span
									class="icon-heart-o mr-2 text-danger"></span>Lưu</a> <a
									th:if="${user.saveJobId != 0 }"
									th:href="@{'/save-job/delete/' +${user.saveJobId}}"
									class="btn btn-block btn-light btn-md"><i
									class="bi bi-heart-fill mr-2 text-danger"></i>Hủy Lưu</a>
							</div>
							<div>
								<a sec:authorize="!isAuthenticated()"
									th:onclick="'save(' +${recruitment.id}+ ')'"
									class="btn btn-block btn-light btn-md"><span
									class="icon-heart-o mr-2 text-danger"></span>Lưu</a>
							</div>
						</div>
						<div class="col-6">
							<a data-toggle="modal" th:unless="${company_role}"
								th:data-target="${'#exampleModal'}+${recruitment.id}"
								class="btn btn-primary py-2">Apply Job</a> <input type="hidden"
								th:id="${'idRe'}+${recruitment.id}" th:value="${recruitment.id}">

							<a th:if="${company_role}"
								th:href="@{'/recruitment/edit/'+${recruitment.id}}"
								class="btn btn-primary btn-md btn-file" type="button">Sữa
								bài đăng</a>
						</div>
					</div>
				</div>
			</div>
			<div>
				<h2 class="mb-4 text-primary" th:text="${recruitment.title}">Mô
					tả công việc</h2>
			</div>
			<div class="row">
				<div class="col-lg-8">
					<div class="mb-5">
						<h3 class="h5 d-flex align-items-center mb-4 text-primary">
							<span class="icon-align-left mr-3"></span>Mô tả công việc
						</h3>
						<p th:utext="${recruitment.description}"></p>
					</div>

				</div>
				<div class="col-lg-4">
					<div class="bg-light p-3 border rounded mb-4">
						<h3 class="text-primary  mt-3 h5 pl-3 mb-3 ">Tóm tắt công
							việc</h3>
						<ul class="list-unstyled pl-3 mb-0">
							<li class="mb-2"><strong class="text-black">Ngày
									tạo: </strong> <span
								th:text="${#dates.format(recruitment.createdAt, 'dd-MM-yyyy')}"></span>
							</li>
							<li class="mb-2"><strong class="text-black">Kiểu
									công việc: </strong> <span th:text="${recruitment.type}"></span></li>
							<li class="mb-2"><strong class="text-black">Loại
									công việc: </strong> <span th:text="${recruitment.category.name}"></span></li>
							<li class="mb-2"><strong class="text-black">Kinh
									nghiệm: </strong> <span th:text="${recruitment.experience}"></span></li>
							<li class="mb-2"><strong class="text-black">Đại
									chỉ: </strong> <span th:text="${recruitment.address}"></span></li>
							<li class="mb-2"><strong class="text-black">Lương:
							</strong> <span th:text="${recruitment.salary}"></span></li>
							<li class="mb-2"><strong class="text-black">Số
									lượng: </strong><span th:text="${recruitment.quantity}"></span></li>
							<li class="mb-2"><strong class="text-black">Hạn nộp
									cv: </strong><span
								th:text="${#dates.format(recruitment.createdAt, 'dd-MM-yyyy')}"></span></li>
						</ul>
					</div>

					<div class="bg-light p-3 border rounded">
						<h3 class="text-primary  mt-3 h5 pl-3 mb-3 ">Share</h3>
						<div class="px-3">
							<a href="#" class="pt-3 pb-3 pr-3 pl-0"><span
								class="icon-facebook"></span></a> <a href="#"
								class="pt-3 pb-3 pr-3 pl-0"><span class="icon-twitter"></span></a>
							<a href="#" class="pt-3 pb-3 pr-3 pl-0"><span
								class="icon-linkedin"></span></a> <a href="#"
								class="pt-3 pb-3 pr-3 pl-0"><span class="icon-pinterest"></span></a>
						</div>
					</div>

				</div>
			</div>
		</div>
	</section>
	<!-- Modal user login success  -->
	<div class="modal fade" th:id="${'exampleModal'}+${recruitment.id}"
		tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">
						Ứng tuyển: <span th:text="${recruitment.title}"></span>
					</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<form method="post" th:action="@{/apply/apply-job} ">
					<div class="modal-body">
						<div class="row">
							<div class="col-12">
								<select th:id="${'choose'}+${recruitment.id}"
									th:onchange="'choosed(' +${recruitment.id}+ ')'"
									class="form-control" aria-label="Default select example">
									<option selected>Chọn phương thức nộp</option>
									<option value="1">Dùng cv đã cập nhật</option>
									<option value="2">Nộp cv mới</option>
								</select>
							</div>
							<div th:id="${'loai1'}+${recruitment.id}" style="display: none"
								class="col-12">

								<label for="fileUpload" class="col-form-label">Chọn cv</label> <select
									class="form-control" name="category_id"
									aria-label="Default select example">
									<option value=" " selected>----</option>
									<th:block th:each="cv : ${cvs}">
										<option th:id="${'idCv'}+${recruitment.id}"
											th:value="${cv.id}" th:text="${cv.filename}"></option>
									</th:block>
								</select> <label for="fileUpload" class="col-form-label">Giới
									thiệu:</label>
								<textarea rows="10" cols="3" class="form-control"
									th:id="${'text'}+${recruitment.id}"> </textarea>
							</div>

							<div th:id="${'loai2'}+${recruitment.id}" style="display: none"
								class="col-12">
								<label for="fileUpload" class="col-form-label">Chọn cv:</label>
								<input type="file" class="form-control"
									th:id="${'fileUpload'}+${recruitment.id}" name="file" required>
								<label for="fileUpload" class="col-form-label">Giới
									thiệu:</label>
								<textarea rows="10" cols="3" class="form-control"
									th:id="${'texta'}+${recruitment.id}"></textarea>
							</div>

						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-dismiss="modal">Đóng</button>
							<button type="button" th:id="${'button1'}+${recruitment.id}"
								style="display: none"
								th:onclick="'apply1(' +${recruitment.id}+ ')'"
								class="btn btn-primary">Nộp</button>
							<button type="button" th:id="${'button2'}+${recruitment.id}"
								style="display: none"
								th:onclick="'apply(' +${recruitment.id}+ ')'"
								class="btn btn-primary">Nộp</button>

						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	<section class="site-section" id="next">
		<div class="container">

			<div th:if="${company_role}" class="row">
				<div class="col-lg-12 pr-lg-4">

					<div class="row mb-5 justify-content-center">
						<div class="col-md-7 text-center">
							<h2 class="section-title mb-2">Danh sách ứng viên ứng tuyển</h2>
						</div>
					</div>



					<div class="row">
						<th:block th:if="${applyPosts.getTotalElements() > 0}"
							th:each="applyPost : ${applyPosts}">
							<div class="col-md-12"
								style="box-shadow: rgba(0, 0, 0, 0.4) 0px 0px 10px; margin: 20px auto;">
								<div class="team d-md-flex p-4 bg-white">
									<IMG style="margin-top: 10px" class="img"
										th:src="${applyPost.user.avatar == null} ? @{'https://st.quantrimang.com/photos/image/072015/22/avatar.jpg'} : @{'/assets/images/' + ${applyPost.user.avatar}}"></IMG>
									<div class="text pl-md-4">
										<H5 class="location mb-0" th:text="${applyPost.user.fullName}"></H5>
										<p style="display: block; color: black"
											th:text="${applyPost.user.address}"></p>
										<span class="position" style="display: block; color: black"
											th:text="${applyPost.user.email}"></span>
										<p class="mb-4" style="width: 700px"
											th:utext="${applyPost.user.description}">.</p>
										<div class="d-flex ">
											<input type="hidden" th:id="${'idAj'}+${applyPost.id}"
												th:value="${applyPost.id}">
											<p>
												<a href="#" th:if="${applyPost.nameCv != null}"
													class="btn btn-primary mr-5" target="_blank"
													th:href="@{'/user/pdf/'+0+'/'+${applyPost.nameCv}}">Xem
													cv</a>
											</p>
											<p>
												<a class="btn btn-primary btn-md btn-file" type="button"
													data-toggle="modal"
													th:attr="data-target='#aModelAccessApply'+${applyPost.id}">Duyệt
													cv</a>
											</p>
										</div>
										<div>
											<p th:if="${applyPost.status == true}"
												style="margin-left: 10px; margin-top: 15px">
												<span style="color: #1e7e34; font-weight: bold">Đã
													duyệt</span>
											</p>
											<p th:if="${applyPost.status != true}"
												style="margin-left: 10px; margin-top: 15px">
												<span style="color: red; font-weight: bold;">Đợi
													duyệt</span>
											</p>
										</div>
									</div>
								</div>
							</div>

							<!-- Model -->
							<div class="modal fade"
								th:id="'aModelAccessApply' + ${applyPost.id}" tabindex="-1"
								role="dialog" aria-labelledby="exampleModalLabel"
								aria-hidden="true">
								<div class="modal-dialog modal-lg">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="aModelAccessApply"></h5>
											Duyệt CV
											<button type="button" class="close" data-dismiss="modal"
												aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="mb-3">
											<div
												class="d-flex justify-content-evenly  align-items-center"
												style="margin-top: 15px">
												<ul class="st">
													<li>Tên :</li>
													<li>Email :</li>
													<li>CV đã gửi :</li>
													<li>Trạng thái :</li>
												</ul>
												<ul class="st">
													<li th:text="${applyPost.user.fullName}"></li>
													<li th:text="${applyPost.user.email}"></li>
													<li th:text="${applyPost.nameCv}"></li>
													<li th:if="${applyPost.status != true}">Chưa duyệt</li>
													<li th:if="${applyPost.status == true}">Đã duyệt</li>
												</ul>

											</div>
											<div class="d-flex justify-content-around align-items-center"
												style="margin-top: 15px">
												<button type="button" class="btn btn-secondary mr-3"
													style="width: 15rem" data-dismiss="modal"
													aria-label="Close">
													<span aria-hidden="true">Đóng</span>
												</button>
												<button type="submit" id="myBtn"
													class="btn btn-block btn-success btn-md"
													style="width: 15rem"
													th:onclick="'applyCv(' +${applyPost.id}+ ')'">
													Duyệt</button>
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- Model -->

						</th:block>
						

			<!-- Những bài viết liên quan -->
			<div th:unless="${company_role}" class="col-md-12 ">

				<div class="row mb-5 justify-content-center">
					<div class="col-md-7 text-center">

						<h2 class="section-title mb-2">Những công việc liên quan</h2>
					</div>

				</div>


				<th:block th:each="recruitment: ${listRelated}">
					<div class="job-post-item p-4 d-block d-lg-flex align-items-center">
						<div class="one-third mb-4 mb-md-0">
							<div class="job-post-item-header align-items-center">
								<span class="subadge" th:text="${recruitment.type}"></span>
								<h2 class="mr-3 text-black">
									<a th:text="${recruitment.title}"
										th:href="${'/recruitment/detail/'} +${recruitment.id}"></a>
								</h2>
							</div>
							<div class="job-post-item-body d-block d-md-flex">
								<div class="mr-3">
									<span class="icon-layers"></span> <a href="#"
										th:text="${recruitment.companyEntity.name}"></a>
								</div>
								<div>
									<span class="icon-my_location"></span> <span
										th:text="${recruitment.address}"></span>
								</div>
							</div>
						</div>

						<input type="hidden" th:id="${'idRe'}+${recruitment.id}"
							th:value="${recruitment.id}">
						<div sec:authorize="isAuthenticated()"
							class="one-forth ml-auto d-flex align-items-center mt-4 md-md-0">
							<div sec:authorize="hasRole('ROLE_USER')">
								<a th:onclick="'save(' +${recruitment.id}+ ')'"
									class="icon text-center d-flex justify-content-center align-items-center icon mr-2">
									<span class="icon-heart"></span>
								</a>
							</div>
							<a sec:authorize="hasRole('ROLE_USER')" data-toggle="modal"
								th:data-target="${'#exampleModal'}+${recruitment.id}"
								class="btn btn-primary py-2">Apply Job</a>
						</div>
						<div sec:authorize="!isAuthenticated()"
							class="one-forth ml-auto d-flex align-items-center mt-4 md-md-0">
							<div>
								<a th:onclick="'save(' +${recruitment.id}+ ')'"
									class="icon text-center d-flex justify-content-center align-items-center icon mr-2">
									<span class="icon-heart"></span>
								</a>
							</div>
							<a sec:authorize="hasRole('ROLE_USER')" data-toggle="modal"
								th:data-target="${'#exampleModal'}+${recruitment.id}"
								class="btn btn-primary py-2">Apply Job</a>
						</div>
					</div>

					<div class="modal fade" th:id="${'exampleModal'}+${recruitment.id}"
						tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
						aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">
										Ứng tuyển: <span th:text="${recruitment.title}"></span>
									</h5>
									<button type="button" class="close" data-dismiss="modal"
										aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<form method="post" th:action="@{/apply/apply-job} ">
									<div class="modal-body">
										<div class="row">
											<div class="col-12">
												<select th:id="${'choose'}+${recruitment.id}"
													th:onchange="'choosed(' +${recruitment.id}+ ')'"
													class="form-control" aria-label="Default select example">
													<option selected>Chọn phương thức nộp</option>
													<option value="1">Dùng cv đã cập nhật</option>
													<option value="2">Nộp cv mới</option>
												</select>
											</div>
											<div th:id="${'loai1'}+${recruitment.id}"
												style="display: none" class="col-12">

												<label for="fileUpload" class="col-form-label">Chọn
													cv</label> <select class="form-control" name="category_id"
													aria-label="Default select example">
													<option value=" " selected>----</option>
													<th:block th:each="cv : ${cvs}">
														<option th:id="${'idCv'}+${recruitment.id}"
															th:value="${cv.id}" th:text="${cv.filename}"></option>
													</th:block>
												</select> <label for="fileUpload" class="col-form-label">Giới
													thiệu:</label>
												<textarea rows="10" cols="3" class="form-control"
													th:id="${'text'}+${recruitment.id}"> </textarea>
											</div>

											<div th:id="${'loai2'}+${recruitment.id}"
												style="display: none" class="col-12">
												<label for="fileUpload" class="col-form-label">Chọn
													cv:</label> <input type="file" class="form-control"
													th:id="${'fileUpload'}+${recruitment.id}" name="file"
													required> <label for="fileUpload"
													class="col-form-label">Giới thiệu:</label>
												<textarea rows="10" cols="3" class="form-control"
													th:id="${'texta'}+${recruitment.id}"></textarea>
											</div>

										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"
												data-dismiss="modal">Đóng</button>
											<button type="button" th:id="${'button1'}+${recruitment.id}"
												style="display: none"
												th:onclick="'apply1(' +${recruitment.id}+ ')'"
												class="btn btn-primary">Nộp</button>
											<button type="button" th:id="${'button2'}+${recruitment.id}"
												style="display: none"
												th:onclick="'apply(' +${recruitment.id}+ ')'"
												class="btn btn-primary">Nộp</button>
										</div>
									</div>
								</form>

							</div>
						</div>
					</div>
				</th:block>
				<!-- pagination user see -->
				<div style="text-align: center"
					th:if="${listRelated.totalPages < 1}">
					<p style="color: red;">Không có bài viết liên quan.</p>
				</div>

				<div th:unless="${listRelated.totalPages < 1}" class="row my-5">
					<div class="col text-center">
						<div class="block-27">
							<ul>
								<li th:if="${listRelated.number != 0  }"><a
									th:href="@{'/recruitment/detail/'+${idRe}(page = ${listRelated.number})}">&lt;</a>
								</li>
								<th:block th:each="ar,state  : ${arr}">
									<li
										th:class="${listRelated.number == state.index  ? 'active' : null}">
										<a
										th:href="@{'/recruitment/detail/'+${idRe}(page = ${state.index +1 })}"
										th:text="${state.index + 1}"></a>
									</li>
								</th:block>
								<li th:if="${listRelated.number != numberPage-1 }"><a
									th:href="@{'/recruitment/detail/'+${idRe}(page = ${listRelated.number + 2})}">&gt;</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			
			
			<!-- pagination user see -->
						<div style="text-align: center"
							th:if="${applyPosts.totalPages < 1}">
							<p style="color: red;">Chưa có ứng cử viên nào ứng tuyển.</p>
						</div>
						<div th:unless="${applyPosts.totalPages < 1}" class="row my-5">
							<div class="col text-center">
								<div class="block-27">
									<ul>
										<li th:if="${applyPosts.number != 0  }"><a
											th:href="@{'/recruitment/detail/'+${idRe}(page = ${applyPosts.number})}">&lt;</a>
										</li>

										<th:block th:each="ar,state  : ${arr}">
											<li
												th:class="${applyPosts.number == state.index  ? 'active' : null}">
												<a
												th:href="@{'/recruitment/detail/'+${idRe}(page = ${state.index +1 })}"
												th:text="${state.index + 1}"></a>
											</li>
										</th:block>

										<li
											th:if="${applyPosts.number != numberPage-1  && numberPage != 1}">
											<a
											th:href="@{'/recruitment/detail/'+${idRe}(page = ${applyPosts.number + 2})}">&gt;</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			</div>

			<!-- end -->
			<script>
				function applyCv(id) {
					var name = "#idAj" + id;
					var idAj = $(name).val();
					var formData = new FormData();

					console.log('idAj :', idAj)
					console.log('name :', name)

					formData.append('idAj', idAj);
					$.ajax({
						type : 'POST',
						url : '/apply/access',
						contentType : false,
						processData : false,
						data : formData,
						success : function(data) {
							console.log(data);
							if (data == "false") {
								swal({
									title : 'Bạn cần phải đăng nhập!',
									/* text: 'Redirecting...', */
									icon : 'error',
									timer : 3000,
									buttons : true,
									type : 'error'
								})
							} else if (data == "true") {
								swal({
									title : 'Duyệt thành công!',
									/* text: 'Redirecting...', */
									icon : 'success',
									timer : 3000,
									buttons : true,
									type : 'success'
								})
							} else if (data == "exist") {
								swal({
									title : 'Đã duyệt !',
									/* text: 'Redirecting...', */
									icon : 'error',
									timer : 3000,
									buttons : true,
									type : 'error'
								})
							} else {
								swal({
									title : 'Bạn đã duyệt!',
									/* text: 'Redirecting...', */
									icon : 'error',
									timer : 3000,
									buttons : true,
									type : 'error'
								})
							}
						},
						error : function(err) {
							alert(err);
						}
					})
				}

				function save(id) {
					var idRe = $("#idRe").val();
					var url = '/save-job/save/';
					var formData = new FormData();
					formData.append('idRe', id);
					console.log('id : ', id);
					$.ajax({
						type : 'POST',
						url : '/save-job/save/' + id,
						contentType : false,
						processData : false,
						data : formData,
						success : function(data) {
							if (data == "false") {
								swal({
									title : 'Bạn đã lưu bài này rồi!',
									/* text: 'Redirecting...', */
									icon : 'error',
									timer : 3000,
									buttons : true,
									type : 'error'
								})
							} else if (data == "true") {
								swal({
									title : 'Lưu thành công!',
									/* text: 'Redirecting...', */
									icon : 'success',
									timer : 3000,
									buttons : true,
									type : 'success'
								}).then(function() {
									location.reload(); // Load lại trang sau khi ấn OK trên thông báo
								});
							} else {
								swal({
									title : 'Bạn cần phải đăng nhập!',
									/* text: 'Redirecting...', */
									icon : 'error',
									timer : 3000,
									buttons : true,
									type : 'error'
								})
							}
						},
						error : function(err) {
							alert(err);
						}
					})
				}
				function choosed(id) {
					var name = '#choose' + id;
					var name1 = 'loai1' + id;
					var name2 = 'loai2' + id;
					var button1 = 'button1' + id;
					var button2 = 'button2' + id;
					var giaitri = $(name).val();
					if (giaitri == 1) {
						document.getElementById(name1).style.display = 'block'
						document.getElementById(name2).style.display = 'none'
						document.getElementById(button1).style.display = 'block'
						document.getElementById(button2).style.display = 'none'
					} else {
						document.getElementById(name2).style.display = 'block'
						document.getElementById(name1).style.display = 'none'
						document.getElementById(button2).style.display = 'block'
						document.getElementById(button1).style.display = 'none'
					}
				}

				function apply(id) {
					var name = "#idRe" + id;
					var nameModal = "#exampleModal" + id;
					var nameFile = "#fileUpload" + id;
					var nameText = "#texta" + id;
					var idRe = $(name).val();
					var textvalue = $(nameText).val();
					var fileUpload = $(nameFile).get(0);
					var files = fileUpload.files;
					var formData = new FormData();
					formData.append('file', files[0]);
					formData.append('idRe', idRe);
					formData.append('text', textvalue);

					console.log('textvalue', textvalue);
					if (files[0] == null) {
						swal({
							title : 'Bạn cần phải chọn cv!',
							/* text: 'Redirecting...', */
							icon : 'error',
							timer : 3000,
							buttons : true,
							type : 'error'
						})
					} else {
						$.ajax(
								{	type : 'POST',
									url : '/apply/apply-job/',
									contentType : false,
									processData : false,
									data : formData,
									success : function(data) {
										if (data == "false") {
											swal({
												title : 'Bạn cần phải đăng nhập!',
												/* text: 'Redirecting...', */
												icon : 'error',
												timer : 3000,
												buttons : true,
												type : 'error'
											})
										}else if (data == "full") {
				                            swal({
				                                title: 'Đã gửi CV quá 10 lần !',
				                                /* text: 'Redirecting...', */
				                                icon: 'error',
				                                timer: 3000,
				                                buttons: true,
				                                type: 'error'
				                            })
				                            $(nameModal).modal('hide');
				                            $('#fileUpload').val("");
				                        } else if (data == "true") {
											swal({
												title : 'Ứng tuyển thành công!',
												/* text: 'Redirecting...', */
												icon : 'success',
												timer : 3000,
												buttons : true,
												type : 'success'
											})
											$(nameModal).modal('hide');
											$('#fileUpload').val("");
										} else if (data == "noPdf") {
											swal({
												title : 'Chỉ nhận file pdf!',
												/* text: 'Redirecting...', */
												icon : 'error',
												timer : 3000,
												buttons : true,
												type : 'error'
											})
											$(nameModal).modal('hide');
											$('#fileUpload').val("");
										} else if (data == "exist") {
											swal({
												title : 'Tên file đã tồn tại!',
												/* text: 'Redirecting...', */
												icon : 'error',
												timer : 3000,
												buttons : true,
												type : 'error'
											})
											$(nameModal).modal('hide');
											$('#fileUpload').val("");
										} else if (data == "choose") {
											swal({
												title : 'Tên chọn file!',
												/* text: 'Redirecting...', */
												icon : 'error',
												timer : 3000,
												buttons : true,
												type : 'error'
											})
											$(nameModal).modal('hide');
											$('#fileUpload').val("");
										} else {
											swal({
												title : 'Bạn đã ứng tuyển công việc này!',
												/* text: 'Redirecting...', */
												icon : 'error',
												timer : 3000,
												buttons : true,
												type : 'error'
											})
											$(nameModal).modal('hide');
											$('#fileUpload').val("");
										}
									},
									error : function(err) {
										alert(err);
									}
								})
					}

				}
				function apply1(id) {
					var name = "#idRe" + id;
					var nameModal = "#exampleModal" + id;
					var nameFile = "#fileUpload" + id;
					var nameText = "#text" + id;
					var idRe = $(name).val();
					var textvalue = $(nameText).val();

					//Mới ở đây: 
					var cv = "#idCv" + id;
					var idCv = $(cv).val();

					var formData = new FormData();

					formData.append('idRe', idRe);
					formData.append('text', textvalue);
					formData.append('idCv', idCv);

					console.log('idRe : ', idRe);
					console.log('text : ', textvalue);
					console.log('idCv : ', idCv);

					$.ajax({
						type : 'POST',
						url : '/apply/apply-job1/',
						contentType : false,
						processData : false,
						data : formData,
						success : function(data) {
							if (data == "loginError") {
								swal({
									title : 'Bạn cần phải đăng nhập!',
									/* text: 'Redirecting...', */
									icon : 'error',
									timer : 3000,
									buttons : true,
									type : 'error'
								})
							}else if (data == "full") {
	                            swal({
	                                title: 'Đã gửi CV quá 10 lần !',
	                                /* text: 'Redirecting...', */
	                                icon: 'error',
	                                timer: 3000,
	                                buttons: true,
	                                type: 'error'
	                            })
	                            $(nameModal).modal('hide');
	                            $('#fileUpload').val("");
	                        } else if (data == "true") {
								swal({
									title : 'Ứng tuyển thành công!',
									/* text: 'Redirecting...', */
									icon : 'success',
									timer : 3000,
									buttons : true,
									type : 'success'
								})
								$(nameModal).modal('hide');
								$('#fileUpload').val("");

							} else if (data == "false") {
								swal({
									title : 'Bạn đã ứng tuyển công việc này!',
									/* text: 'Redirecting...', */
									icon : 'error',
									timer : 3000,
									buttons : true,
									type : 'error'
								})
								$(nameModal).modal('hide');
								$('#fileUpload').val("");
							}
						},
						error : function(err) {
							alert(err);
						}
					})
				}
			</script>
		</div>
	</section>




	<footer th:replace="~{public/fragments :: footer}"
		class="ftco-footer ftco-bg-dark ftco-section"> </footer>
</body>
</html>